{% extends "business-to-business/_layouts/settings" %}


{# {% set crumbs = [
    { label: 'Business To Business' | t('business-to-business'), url: url('business-to-business') },
    { label: 'Business' | t('business-to-business'), url: url('business-to-business/business') },
] %} #}

{% set fullPageForm = true %}

{% set selectedTab = 'business-settings' %}
{% import '_includes/forms' as forms %}

{% block content %}
    <input type="hidden" name="action" value="business-to-business/business/save-default-rules">
    <h2>{{ "Shipping Rules" |t('business-to-business') }}</h2>
    

    <table id="shipping-categories-conditions"
            class="data fullwidth collapsible">
        <thead>
        <tr>
            <th scope="col">{{ 'Shipping Method'|t('business-to-business') }}</th>
            <th scope="col">{{ 'Condition'|t('business-to-business') }} <span class='info'>Setting any value below to "Require" will result in employee having no other Shipping Method options.<p style="color:red">Note: "Apply Cost to Voucher" allows the Gateway to be used and charges the business for shipping charges incurred.</p></span></th>
        </tr>
        </thead>
        <tbody>
        {% for shippingRule in shippingRules %}
        
            {% set id = shippingRule.id %}
            <tr{% if id %} data-id="{{ id }}" data-name="{{ shippingRule.name }}"{% endif %}>
                <th scope="row" data-title="{{ 'Name'|t('business-to-business') }}">
                    {{ shippingRule.name }}
                </th>
                <td data-title="{{ 'Condition'|t('business-to-business') }}">
                    {{ forms.selectField({
                        name: 'shippingRulesBusiness['~shippingRule.shippingMethodId~'][condition]',
                        value: shippingRule.condition ?? 'allow',
                        options: ShippingRulesOptions
                    }) }}
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
    <hr>
    <h2>{{ "Gateway Rules"|t('business-to-business') }}</h2>

    <table id="shipping-categories-conditions"
            class="data fullwidth collapsible">
        <thead>
        <tr>
            <th scope="col">{{ 'Gateway'|t('business-to-business') }}</th>
            <th scope="col">{{ 'Condition'|t('business-to-business') }} <span class='info'>Setting any value below to "Require" will result in employee having no other Gateway options.</span></th>
            <th scope="col">{{ 'Default OrderStatus'|t('business-to-business') }} <span class='info'>Override Default OrderStatus based on Business and Gateway.</span></th>
        </tr>
        </thead>
        <tbody>

        {% for gatewayRule in gatewayRules %}
        
            {% set id = gatewayRule.id %}
            <tr{% if id %} data-id="{{ id }}" data-name="{{ gatewayRule.name }}"{% endif %}>
                <th scope="row" data-title="{{ 'Name'|t('business-to-business') }}">
                    {{ gatewayRule.name }}
                </th>
                <td data-title="{{ 'Condition'|t('business-to-business') }}">
                    {{ forms.selectField({
                        name: 'gatewayRulesBusiness['~gatewayRule.gatewayId~'][condition]',
                        value: gatewayRule.condition ?? 'allow',
                        options: GatewayRulesOptions
                    }) }}
                </td>
                <td data-title="{{ 'Gateway'|t('business-to-business') }}">
                    {{ forms.selectField({
                        name: 'gatewayRulesBusiness['~gatewayRule.gatewayId~'][orderStatusId]',
                        value: gatewayRule.orderStatusId ?? defaultOrderStatus,
                        options: orderStatusOptions
                    }) }}
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
{% endblock %}